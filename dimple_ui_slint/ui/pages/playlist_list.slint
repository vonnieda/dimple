import { ScrollView, VerticalBox, HorizontalBox, Button } from "std-widgets.slint";
import { CardGrid, CardGridAdapter } from "../components/card_grid.slint";
import {Styles} from "../common.slint";

export global PlaylistListAdapter {
    pure callback new_playlist();
}

component ActionButton inherits Button {
    in property <length> button-width: 40px;
    in property <string> label;

    colorize-icon: true;
    width: button-width;
    height: button-width;
    accessible-label: label;
    accessible-role: button;
}

component ActionButtons inherits HorizontalBox {
    vertical-stretch: 0;
    horizontal-stretch: 0;
    alignment: start;

    ActionButton {
        label: @tr("New Playlist");
        icon: @image-url("../../icons/phosphor/SVGs/regular/plus.svg");
        clicked => { PlaylistListAdapter.new_playlist(); }
    }
}

export component PlaylistList inherits VerticalBox {
    in-out property <CardGridAdapter> model;

    VerticalLayout {
        Text {
            text: "Playlists";
            font-size: 1rem * Styles.page_title_font_rem;
        }    
        ActionButtons {
    
        }
    }

    ScrollView {                        
        CardGrid {
            cards: model.cards;
            parent-width: parent.width;
        }
    }

    Text {
        horizontal-alignment: right;
        text: model.cards.length + " items";
    }
}
import { Button, VerticalBox , ScrollView} from "std-widgets.slint";
import { Styles, Navigator } from "../common.slint";
import {StyleMetrics, Palette} from "std-widgets.slint";
import {ImageLinkAdapter, LinkAdapter} from "../components/link.slint";
import { Link } from "link.slint";
import { BorderImage } from "border_image.slint";

export struct CardAdapter {
    image: ImageLinkAdapter,
    title: LinkAdapter,
    sub-title: LinkAdapter,
    key: string,
}

export component Card inherits VerticalBox {
    in property <CardAdapter> model: {
        image: {image: @image-url("../../icons/phosphor/PNGs/regular/vinyl-record.png"),name: "A Reign of Fish",url: "internal://release/1234"},
        title: {name: "A Reign of Fish",url: "internal://release/1234"},
        sub-title: {name: "Fresh Pliers",url: "internal://artist/9876"},
    };

    callback pointer-event(event: PointerEvent, x: length, y: length, model: CardAdapter);

    width: Styles.thumbnail-width-large;
    alignment: start;
    padding: 0;
    spacing: 4px;

    BorderImage {
        source: model.image.image;
        width: root.width;
        height: root.width;
        clicked => { Navigator.navigate(model.image.url); }
        pointer-event(event) => { root.pointer-event(event, 
            self.absolute-position.x + self.pressed-x, 
            self.absolute-position.y + self.pressed-y,
            model); 
        }
    }
    Link {
        url: model.title.url;
        name: model.title.name;
    }
    Link {
        url: model.sub-title.url;
        name: model.sub-title.name;
    }
}


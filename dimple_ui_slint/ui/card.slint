import { Button, VerticalBox , ScrollView} from "std-widgets.slint";
import { ImageLink, Link } from "./common.slint";
import { Palette, Navigator } from "common.slint";
import {StyleMetrics} from "std-widgets.slint";

export struct CardModel {
    image: ImageLink,
    title: Link,
    // TODO eventually an array
    sub-title: Link,
}

export component Card inherits VerticalLayout {
    in property <CardModel> model: {
        image: {image: @image-url("../images/dark.png"),name: "A Reign of Fish",url: "internal://release/1234"},
        title: {name: "A Reign of Fish",url: "internal://release/1234"},
        sub-title: {name: "Fresh Pliers",url: "internal://artist/9876"},
    };

    width: Palette.image-width-large;
    spacing: 2px;
    alignment: start;

    image-area := TouchArea {
        width: root.width;
        height: Palette.image-width-large;
        mouse-cursor: pointer;
        clicked => { Navigator.navigate(model.image.url); }
        Rectangle {
            width: 100%;
            height: 100%;
            border-radius: Palette.image-border-radius;
            border-width: Palette.image-border-width;
            border-color: Palette.image-border-color;
            clip: true;
            Image {
                width: 100%;
                height: 100%;
                source: model.image.image;
                accessible-role: button;
                accessible-description: model.image.name;
            }    
        }
    }
    Rectangle {}
    title-area := TouchArea {
        mouse-cursor: pointer;
        clicked => { Navigator.navigate(model.title.url); }
        title := Text {
            width: root.width;
            text: model.title.name;
            wrap: word-wrap;
            font-size: 1.2rem;
            font-weight: 700;
        }
    }
    sub-title-area := TouchArea {
        mouse-cursor: pointer;
        clicked => { Navigator.navigate(model.sub-title.url); }
        Text {
            width: root.width;
            text: model.sub-title.name;
            wrap: word-wrap;
        }
    }
}

import { HorizontalBox, LineEdit, Palette } from "std-widgets.slint";
import { Styles, Navigator, AppState } from "./common.slint";

component NavBarButton inherits TouchArea {
    in property <image> source;
    width: image.width;
    image := Image {
        source: root.source;
        colorize: parent.has-hover 
            ? Palette.accent-foreground
            : Palette.foreground;
        width: 24px;
        height: 24px;
    }
}

export component NavBar inherits HorizontalBox {
    padding: 0;
    NavBarButton {
        source: @image-url("../icons/phosphor/SVGs/regular/sidebar.svg");
        clicked => { AppState.sidebar_open = !AppState.sidebar_open; }
    }
    Rectangle {
        width: parent.spacing;
    }
    NavBarButton {
        source: @image-url("../icons/phosphor/SVGs/regular/arrow-left.svg");
        clicked => { Navigator.navigate("dimple://back") }
    }
    NavBarButton {
        source: @image-url("../icons/phosphor/SVGs/regular/arrow-right.svg");
        clicked => { Navigator.navigate("dimple://forward") }
    }
    NavBarButton {
        source: @image-url("../icons/phosphor/SVGs/regular/arrow-clockwise.svg");
        clicked => { Navigator.navigate("dimple://refresh") }
    }
    NavBarButton {
        source: @image-url("../icons/phosphor/SVGs/regular/house.svg");
        clicked => { Navigator.navigate("dimple://home") }
    }
    LineEdit {
        placeholder-text: "Search for songs, artists, genres, playlists, URLs...";
        edited(query) => { Navigator.navigate("dimple://search/" + query); }
        accepted(query) => { Navigator.navigate("dimple://search/" + query); }
        font-size: Styles.default-font-size;
        height: self.font-size * 2;
    }
    NavBarButton {
        source: @image-url("../icons/phosphor/SVGs/regular/queue.svg");
        clicked => { Navigator.navigate("dimple://queue") }
    }
    NavBarButton {
        source: @image-url("../icons/phosphor/SVGs/regular/gear.svg");
        clicked => { Navigator.navigate("dimple://settings") }
    }
}
